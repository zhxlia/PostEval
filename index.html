<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Model Insight â€“ Capability & Behavioral Analysis</title>
  <meta name="description" content="Automated capability and behavioral analysis of models with bilingual (EN/ä¸­æ–‡) UI and in-page Markdown rendering for examples." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <!-- highlight.js for code blocks inside rendered Markdown -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
  <style>
    :root{
      --bg: #0b1020;
      --bg2: #0f1430;
      --card: rgba(255,255,255,0.06);
      --border: rgba(255,255,255,0.12);
      --text: #e8ecf1;
      --muted: #c4cede;
      --accent: #7aa2ff;
      --accent2: #a07bff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; color:var(--text);
      background: radial-gradient(1200px 800px at 10% 10%, #1a2148 0%, transparent 60%),
                  radial-gradient(900px 600px at 90% 20%, #232a5a 0%, transparent 60%),
                  linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header{
      position:sticky;top:0;z-index:10;background:linear-gradient(180deg, rgba(11,16,32,.9), rgba(11,16,32,.6), transparent);
      backdrop-filter: blur(8px);
      border-bottom:1px solid var(--border);
    }
    .row{display:flex;align-items:center;justify-content:space-between;gap:16px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:0 6px 24px rgba(122,162,255,.4)}
    .title{font-weight:800;letter-spacing:.3px}
    .lang-toggle{display:flex;gap:6px;align-items:center;background:var(--card);border:1px solid var(--border);padding:6px;border-radius:999px}
    .lang-toggle button{border:0;background:transparent;color:var(--muted);padding:8px 12px;border-radius:999px;cursor:pointer;font-weight:600}
    .lang-toggle button.active{background:linear-gradient(135deg, rgba(122,162,255,.15), rgba(160,123,255,.15)); color:#fff}

    .hero{display:grid;grid-template-columns:1.1fr .9fr; gap:28px; margin-top:28px; align-items:center}
    .kicker{color:var(--accent);font-weight:700;letter-spacing:.2px}
    h1{font-size:clamp(28px,4.2vw,44px);margin:8px 0 10px;line-height:1.12}
    .sub{color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px}
    .hero img{width:100%;border-radius:16px;border:1px solid var(--border);box-shadow:0 12px 36px rgba(0,0,0,.25)}

    .section{margin-top:40px}
    .section h2{font-size:clamp(22px,3vw,28px);margin:0 0 14px}
    .grid{display:grid;grid-template-columns:repeat(2,1fr); gap:16px}

    ul{margin:8px 0 0 18px}
    li{margin:8px 0}
    a{color:#c9d6ff; text-decoration:underline dotted; text-underline-offset:3px}
    a.button{display:inline-block;text-decoration:none;background:linear-gradient(135deg, rgba(122,162,255,.18), rgba(160,123,255,.18));border:1px solid var(--border);padding:10px 14px;border-radius:10px;color:#fff}

    /* Methodology cards */
    .cols{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
    .tag{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:rgba(255,255,255,.03);color:var(--muted);display:inline-flex;gap:6px;align-items:center}

    /* Modal for Markdown */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(8,12,24,.7);backdrop-filter:blur(6px);z-index:50}
    .modal.open{display:flex}
    .modal-card{width:min(920px,92vw);max-height:84vh;overflow:auto;background:#0c1226;border:1px solid var(--border);border-radius:16px;box-shadow:0 18px 60px rgba(0,0,0,.4)}
    .modal-head{position:sticky;top:0;display:flex;align-items:center;justify-content:space-between;gap:10px;padding:14px 16px;border-bottom:1px solid var(--border);background:linear-gradient(180deg,#0c1226,#0c132a)}
    .modal-body{padding:18px}
    .close{background:transparent;border:1px solid var(--border);color:var(--muted);padding:6px 10px;border-radius:10px;cursor:pointer}
    .spinner{width:18px;height:18px;border:3px solid rgba(255,255,255,.18);border-top-color:#fff;border-radius:50%;animation:spin 1s linear infinite;display:inline-block}
    @keyframes spin{to{transform:rotate(360deg)}}

    footer{margin:48px 0 18px;color:var(--muted);display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap}

    /* Responsive */
    @media (max-width:900px){.hero{grid-template-columns:1fr}.grid,.cols{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="container row">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">Model Insight</div>
      </div>
      <div class="lang-toggle" role="group" aria-label="language toggle">
        <button id="btn-en" class="active" aria-pressed="true">EN</button>
        <button id="btn-zh" aria-pressed="false">ä¸­æ–‡</button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- HERO -->
    <section class="hero">
      <div>
        <div class="kicker" id="kicker">Automated model analytics</div>
        <h1 id="headline">Capability & Behavioral Analysisâ€”Just Type a Query</h1>
        <p class="sub" id="subhead">Get two natural-language reports from a single query: a capability analysis and a behavioral analysisâ€”plus deep dives beyond raw performance.</p>
        <div class="card" id="intro"></div>
      </div>
      <div>
        <!-- Replace the PNG at assets/overview.png in your repo -->
        <img id="hero-img" src="assets/overview.png" alt="Project overview image" loading="lazy">
      </div>
    </section>

    <!-- HIGHLIGHTS -->
    <section class="section">
      <h2 id="highlights-title">Highlights</h2>
      <div class="card">
        <div id="highlights"></div>
      </div>
    </section>

    <!-- METHODOLOGY -->
    <section class="section">
      <h2 id="method-title">Methodology</h2>
      <div class="cols">
        <div class="card">
          <div class="tag">ğŸ”§ <span id="cap-tag">Capability Analysis</span></div>
          <div id="capability"></div>
        </div>
        <div class="card">
          <div class="tag">ğŸ§­ <span id="beh-tag">Behavioral Analysis</span></div>
          <div id="behavioral"></div>
        </div>
      </div>
    </section>

    <!-- Quick links row -->
    <section class="section">
      <div class="grid">
        <div class="card">
          <strong id="assets-title">Assets you provide</strong>
          <ul id="assets"></ul>
        </div>
        <div class="card">
          <strong id="tips-title">Tips</strong>
          <ul id="tips"></ul>
        </div>
      </div>
    </section>

  </main>

  <footer class="container">
    <div>Â© <span id="year"></span> Model Insight</div>
    <div>
      <a class="button" href="#" id="deploy-how">How to deploy on GitHub Pages</a>
    </div>
  </footer>

  <!-- Markdown Modal -->
  <div id="md-modal" class="modal" aria-hidden="true" aria-labelledby="md-title">
    <div class="modal-card">
      <div class="modal-head">
        <div id="md-title">Document</div>
        <div id="md-status" aria-live="polite"></div>
        <button class="close" id="md-close" aria-label="Close">âœ•</button>
      </div>
      <div class="modal-body">
        <article id="md-content" class="markdown-body"></article>
      </div>
    </div>
  </div>

  <!-- Dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/common.min.js"></script>

  <script>
    // ------- i18n content (EN default) -------
    const i18n = {
      en: {
        kicker: "Automated model analytics",
        headline: "Capability & Behavioral Analysisâ€”Just Type a Query",
        subhead: "Get two natural-language reports from a single query: a capability analysis and a behavioral analysisâ€”plus deep dives beyond raw performance.",
        intro: `
          <ul>
            <li>ğŸŒŸ This project is designed for the automated <strong>capability</strong> and <strong>behavioral</strong> analysis of models.
              <ul>
                <li><strong>Capability Analysis</strong>: Diverging from traditional quantitative evaluations, our project facilitates a <em>multi-dimensional</em> and <em>multi-level</em> comparison of model capabilities. It enables an in-depth exploration of metrics beyond performance, such as <em>token consumption</em> and <em>execution time</em>.</li>
                <li><strong>Behavioral Analysis</strong>: By mining the models' behavior, we identify their <em>reasoning patterns</em>, substantiating their strengths and weaknesses.</li>
              </ul>
            </li>
            <li>â¡ï¸ Users can obtain <strong>two natural-language reports</strong>â€”a capability analysis report and a behavioral analysis reportâ€”simply by inputting a single query.</li>
            <li>ğŸ“‘ The detailed paper, benchmarks, and the system will be released soon. We welcome your attention and usage. â¤ï¸</li>
          </ul>
        `,
        highlightsTitle: "Highlights",
        highlights: `
          <ul>
            <li><strong>Capability Differentiation and Correlation Analysis</strong>: We assess the discernible differences among models and the correlations between capabilities (e.g., simultaneous improvement or decline).<br>
              <a href="#" class="example-link" data-file="examples/capability-correlation.md">[Example doc]</a>
            </li>
            <li><strong>Comparative Analysis of Non-Performance Metrics</strong>: Compare metrics such as consumed tokens, inference tokens, and latency/time.<br>
              <a href="#" class="example-link" data-file="examples/non-performance-metrics.md">[Example doc: o3-high, o3-mini-high & GPT-4.1 Token Analysis]</a>
            </li>
            <li><strong>In-depth Analysis of Scalability</strong>: Fix a specific exercise and scale from 100 to 1000 cases, producing a comprehensive report.<br>
              <a href="#" class="example-link" data-file="examples/scaling-analysis.md">[Example doc]</a>
            </li>
            <li><strong>Cross-Exercise Horizontal Comparison</strong>: Compare across 10â€“20 exercises for robust horizontal insights.<br>
              <a href="#" class="example-link" data-file="examples/cross-exercise.md">[Example doc]</a>
            </li>
          </ul>
        `,
        methodTitle: "Methodology",
        capTag: "Capability Analysis",
        behTag: "Behavioral Analysis",
        capability: `
          <p>The process begins with a <strong>Coordinator</strong> agent that parses parameters from the user's query and invokes a <strong>Data Explorer</strong>. The Data Explorer retrieves data relevant to the query via tools.</p>
          <p>Next, a <strong>Planner</strong>, guided by the data and the initial query, instructs an <strong>Analyzer</strong> to study the data from multiple perspectives. Findings are aggregated by a <strong>Reporter</strong> to produce a preliminary capability analysis report.</p>
          <p>After a <strong>Checker</strong> verifies the report, a <strong>Summary</strong> module distills the core conclusions of the capability analysis.</p>
        `,
        behavioral: `
          <p>Using the preliminary capability report and the user's initial query, a <strong>Case Strategy</strong> node generates multiple analysis tasks (per-model or multi-model).</p>
          <p>Tasks are executed by a <strong>Case Analyzer</strong>, which flexibly selects relevant cases (including large batches &gt; 100) and produces detailed analyses. Once complete, a <strong>Case Reporter</strong> consolidates all results into a comprehensive case analysis report.</p>
        `,
        assetsTitle: "Assets you provide",
        assets: [
          "PNG image at <code>assets/overview.png</code> (shown above)",
          "Markdown files in <code>examples/</code> (opened in a modal when you click the links)",
          "Optional: a <code>CNAME</code> file if you use a custom domain"
        ],
        tipsTitle: "Tips",
        tips: [
          "Edit text or add more example links by modifying <code>index.html</code> onlyâ€”no build step needed.",
          "Default language is English. Your selection is saved to <code>localStorage</code>.",
          "All links fetch Markdown from relative paths, which works on GitHub Pages."
        ]
      },
      zh: {
        kicker: "è‡ªåŠ¨åŒ–æ¨¡å‹åˆ†æ",
        headline: "èƒ½åŠ›åˆ†æä¸è¡Œä¸ºåˆ†æâ€”â€”åªéœ€è¾“å…¥ä¸€ä¸ªæŸ¥è¯¢",
        subhead: "åªéœ€ä¸€æ¬¡è¾“å…¥å³å¯è·å¾—ä¸¤ä»½è‡ªç„¶è¯­è¨€æŠ¥å‘Šï¼šèƒ½åŠ›åˆ†ææŠ¥å‘Šä¸è¡Œä¸ºåˆ†ææŠ¥å‘Šï¼›å¹¶å¯¹æ€§èƒ½ä¹‹å¤–çš„æŒ‡æ ‡è¿›è¡Œæ·±åº¦æ¢ç´¢ã€‚",
        intro: `
          <ul>
            <li>ğŸŒŸ æœ¬é¡¹ç›®ç”¨äºå¯¹æ¨¡å‹è¿›è¡Œè‡ªåŠ¨åŒ–çš„<strong>èƒ½åŠ›åˆ†æ</strong>å’Œ<strong>è¡Œä¸ºåˆ†æ</strong>ã€‚
              <ul>
                <li><strong>èƒ½åŠ›åˆ†æ</strong>ï¼šä¸åŒäºä¼ ç»Ÿçš„å®šé‡è¯„ä»·ï¼Œæˆ‘ä»¬çš„é¡¹ç›®å¯ä»¥å¯¹æ¨¡å‹çš„èƒ½åŠ›è¿›è¡Œå¤šç»´å¤šå±‚çº§çš„æ¯”è¾ƒï¼Œä»¥åŠå¯¹é™¤äº†æ€§èƒ½ä¹‹å¤–çš„æŒ‡æ ‡ï¼ˆå¦‚<em>æ¶ˆè€—çš„ token æ•°é‡</em>ã€<em>è¿è¡Œæ—¶é—´</em>ï¼‰è¿›è¡Œæ·±åº¦æ¢ç´¢ã€‚</li>
                <li><strong>è¡Œä¸ºåˆ†æ</strong>ï¼šé€šè¿‡å¯¹æ¨¡å‹è¡Œä¸ºçš„æŒ–æ˜ï¼Œå‘ç°å…¶<em>æ¨ç†æ¨¡å¼</em>ï¼Œå¹¶å…·è±¡åŒ–æ¨¡å‹çš„ä¼˜åŠ¿ä¸åŠ£åŠ¿ã€‚</li>
              </ul>
            </li>
            <li>â¡ï¸ ä½ åªéœ€è¦è¾“å…¥ä¸€ä¸ª queryï¼Œå°±å¯ä»¥å¾—åˆ°ä¸¤ä»½<strong>è‡ªç„¶è¯­è¨€æŠ¥å‘Š</strong>ï¼šèƒ½åŠ›åˆ†ææŠ¥å‘Šä»¥åŠè¡Œä¸ºåˆ†ææŠ¥å‘Šã€‚</li>
            <li>ğŸ“‘ å…·ä½“è®ºæ–‡ã€benchmarkï¼Œä»¥åŠç³»ç»Ÿå³å°†æ”¾å‡ºï¼Œæ¬¢è¿å¤§å®¶å¤šå¤šå…³æ³¨ä¸ä½¿ç”¨ â¤ï¸</li>
          </ul>
        `,
        highlightsTitle: "äº®ç‚¹ case",
        highlights: `
          <ul>
            <li>æ¨¡å‹é—´çš„èƒ½åŠ›æœ‰æ²¡æœ‰åŒºåˆ†åº¦ä»¥åŠæ¨¡å‹çš„èƒ½åŠ›ä¹‹é—´æœ‰æ²¡æœ‰ç›¸å…³æ€§ï¼ˆæ¯”å¦‚åŒæ¶¨ã€åŒè·Œï¼‰<br>
              <a href="#" class="example-link" data-file="examples/capability-correlation.md">[ç¤ºä¾‹æ–‡æ¡£]</a>
            </li>
            <li>å¯¹é™¤æ€§èƒ½ä¹‹å¤–çš„æŒ‡æ ‡æ¯”è¾ƒï¼ˆæ¯”å¦‚æ¶ˆè€—çš„ token æ•°ã€æ¨ç†çš„ token æ•°ã€èŠ±è´¹æ—¶é—´ï¼‰<br>
              <a href="#" class="example-link" data-file="examples/non-performance-metrics.md">[ç¤ºä¾‹æ–‡æ¡£]</a>
            </li>
            <li>å›ºå®šæŸä¸ª exerciseï¼Œåˆ†æ 100 â†’ 1000 ä¸ª caseï¼Œè¾“å‡ºä¸€ä»½æŠ¥å‘Š<br>
              <a href="#" class="example-link" data-file="examples/scaling-analysis.md">[ç¤ºä¾‹æ–‡æ¡£]</a>
            </li>
            <li>æ¨ªå‘å¯¹æ¯” 10ï½20 ä¸ª exercise<br>
              <a href="#" class="example-link" data-file="examples/cross-exercise.md">[ç¤ºä¾‹æ–‡æ¡£]</a>
            </li>
          </ul>
        `,
        methodTitle: "æ–¹æ³•",
        capTag: "èƒ½åŠ›åˆ†æ",
        behTag: "è¡Œä¸ºåˆ†æ",
        capability: `
          <p>ç”± <strong>coordinator</strong> è§£æ query ä¸­çš„å‚æ•°ï¼Œå¹¶è°ƒç”¨ <strong>data_explorer</strong>ã€‚data_explorer è°ƒç”¨å·¥å…·è·å– query ç›¸å…³æ•°æ®ã€‚</p>
          <p><strong>planner</strong> æ ¹æ®æ•°æ®å’Œ query æŒ‡å¯¼ <strong>analyzer</strong> ä»ä¸åŒè§’åº¦åˆ†ææ•°æ®ï¼Œ<strong>reporter</strong> æ±‡æ€»ç”Ÿæˆèƒ½åŠ›åˆ†ææŠ¥å‘Šã€‚</p>
          <p>ç» <strong>checker</strong> æ£€éªŒåˆæ ¼åè¾“å…¥ <strong>summary</strong>ï¼Œè·å¾—èƒ½åŠ›åˆ†ææŠ¥å‘Šçš„æ ¸å¿ƒç»“è®ºã€‚</p>
        `,
        behavioral: `
          <p>åˆ©ç”¨èƒ½åŠ›åˆ†æç”Ÿæˆçš„åˆæ­¥æŠ¥å‘Šå’Œç”¨æˆ·å…³æ³¨çš„é—®é¢˜ï¼ˆå³æœ€åˆçš„æŸ¥è¯¢ï¼‰ï¼Œç”± <strong>case_Strategy</strong> èŠ‚ç‚¹ç”Ÿæˆå¤šä¸ªåˆ†æä»»åŠ¡ï¼ˆå•æ¨¡å‹/å¤šæ¨¡å‹ï¼‰ã€‚</p>
          <p>å°†ä»»åŠ¡äº¤ç»™ <strong>case_analyzer</strong> èŠ‚ç‚¹ï¼Œçµæ´»ç­›é€‰ç›¸å…³æ¡ˆä¾‹ï¼ˆåŒ…å« &gt;100 çš„å¤§æ‰¹é‡æ¡ˆä¾‹ï¼‰ï¼Œç”Ÿæˆæ¯ä¸ªä»»åŠ¡çš„è¯¦ç»†åˆ†ææŠ¥å‘Šã€‚æœ€ç»ˆç”± <strong>case reporter</strong> èŠ‚ç‚¹æ±‡æ€»ï¼Œç”Ÿæˆç»¼åˆæ¡ˆä¾‹åˆ†ææŠ¥å‘Šã€‚</p>
        `,
        assetsTitle: "éœ€è¦ä½ æä¾›çš„ç´ æ",
        assets: [
          "æ”¾ç½®ä¸€å¼  PNG å›¾ç‰‡åˆ° <code>assets/overview.png</code>ï¼ˆä¸Šæ–¹å±•ç¤ºï¼‰",
          "æŠŠç¤ºä¾‹ Markdown æ–‡æ¡£æ”¾åˆ° <code>examples/</code> ç›®å½•ï¼ˆç‚¹å‡»é“¾æ¥åä¼šåœ¨å¼¹çª—ä¸­è‡ªåŠ¨æ¸²æŸ“ï¼‰",
          "å¦‚éœ€è‡ªå®šä¹‰åŸŸåï¼Œå¯æ·»åŠ  <code>CNAME</code> æ–‡ä»¶"
        ],
        tipsTitle: "å°è´´å£«",
        tips: [
          "åªéœ€ä¿®æ”¹ <code>index.html</code> å³å¯å®Œæˆå¤§å¤šæ•°æ–‡æ¡ˆè°ƒæ•´ï¼Œæ— éœ€æ„å»ºæµç¨‹ã€‚",
          "é»˜è®¤è¯­è¨€ä¸ºè‹±æ–‡ï¼›è¯­è¨€é€‰æ‹©ä¼šä¿å­˜åˆ° <code>localStorage</code>ã€‚",
          "ç¤ºä¾‹é“¾æ¥é€šè¿‡ç›¸å¯¹è·¯å¾„è·å– Markdownï¼Œå…¼å®¹ GitHub Pagesã€‚"
        ]
      }
    };

    // ------- populate content -------
    const $ = sel => document.querySelector(sel);
    const els = {
      kicker: $('#kicker'), headline: $('#headline'), subhead: $('#subhead'), intro: $('#intro'),
      highlightsTitle: $('#highlights-title'), highlights: $('#highlights'),
      methodTitle: $('#method-title'), capability: $('#capability'), behavioral: $('#behavioral'),
      capTag: $('#cap-tag'), behTag: $('#beh-tag'),
      assetsTitle: $('#assets-title'), assets: $('#assets'),
      tipsTitle: $('#tips-title'), tips: $('#tips'),
      year: $('#year')
    };

    function renderLang(lang){
      const t = i18n[lang];
      els.kicker.textContent = t.kicker;
      els.headline.textContent = t.headline;
      els.subhead.textContent = t.subhead;
      els.intro.innerHTML = t.intro;
      els.highlightsTitle.textContent = t.highlightsTitle;
      els.highlights.innerHTML = t.highlights;
      els.methodTitle.textContent = t.methodTitle;
      els.capTag.textContent = t.capTag;
      els.behTag.textContent = t.behTag;
      els.capability.innerHTML = t.capability;
      els.behavioral.innerHTML = t.behavioral;
      els.assetsTitle.textContent = t.assetsTitle;
      els.assets.innerHTML = t.assets.map(x=>`<li>${x}</li>`).join('');
      els.tipsTitle.textContent = t.tipsTitle;
      els.tips.innerHTML = t.tips.map(x=>`<li>${x}</li>`).join('');

      // Rebind example links after content swap
      bindExampleLinks();
    }

    // ------- language toggle -------
    const btnEn = document.getElementById('btn-en');
    const btnZh = document.getElementById('btn-zh');
    function setActive(btn){
      [btnEn, btnZh].forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      btnEn.setAttribute('aria-pressed', btn===btnEn ? 'true':'false');
      btnZh.setAttribute('aria-pressed', btn===btnZh ? 'true':'false');
    }

    btnEn.addEventListener('click',()=>{localStorage.setItem('lang','en'); setActive(btnEn); renderLang('en')});
    btnZh.addEventListener('click',()=>{localStorage.setItem('lang','zh'); setActive(btnZh); renderLang('zh')});

    // ------- Markdown modal -------
    const modal = document.getElementById('md-modal');
    const mdTitle = document.getElementById('md-title');
    const mdStatus = document.getElementById('md-status');
    const mdClose = document.getElementById('md-close');
    const mdContent = document.getElementById('md-content');

    function openMarkdown(path){
      modal.classList.add('open');
      modal.setAttribute('aria-hidden','false');
      mdTitle.textContent = path.split('/').pop();
      mdContent.innerHTML = '';
      mdStatus.innerHTML = '<span class="spinner" aria-hidden="true"></span>';
      fetch(path, {cache:'no-store'})
        .then(r=>{ if(!r.ok) throw new Error('HTTP '+r.status); return r.text(); })
        .then(md=>{
          mdStatus.textContent='';
          const html = marked.parse(md, { gfm:true, breaks:true });
          mdContent.innerHTML = html;
          // syntax highlight
          document.querySelectorAll('#md-content pre code').forEach(block=>{
            try{ hljs.highlightElement(block); }catch(e){}
          });
        })
        .catch(err=>{
          mdStatus.textContent = 'Failed to load document (' + err.message + '). Make sure the file exists in your repo.';
        });
    }

    function closeModal(){ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); }
    mdClose.addEventListener('click', closeModal);
    modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });
    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && modal.classList.contains('open')) closeModal(); });

    function bindExampleLinks(){
      document.querySelectorAll('.example-link').forEach(a=>{
        a.addEventListener('click', (e)=>{ e.preventDefault(); openMarkdown(a.getAttribute('data-file')); });
      });
    }

    // Footer year
    els.year.textContent = new Date().getFullYear();

    // Deploy how-to (opens a small markdown help from an inline blob)
    document.getElementById('deploy-how').addEventListener('click', (e)=>{
      e.preventDefault();
      const md = `# Deploy to GitHub Pages\n\n1. **Create a repo** on GitHub (e.g., \n   \`model-insight-site\`).\n2. Add these paths and files:\n\n   \n   - \`index.html\` (this file)\n   - \`assets/overview.png\` (your PNG)\n   - \`examples/capability-correlation.md\`\n   - \`examples/non-performance-metrics.md\`\n   - \`examples/scaling-analysis.md\`\n   - \`examples/cross-exercise.md\`\n\n3. **Commit & push** to the \`main\` branch.\n4. Go to **Settings â†’ Pages**.\n   - Source: **Deploy from a branch**\n   - Branch: **main** / **root**\n   - Save.\n5. Wait 1â€“2 minutes, then open: \`https://<your-username>.github.io/<repo-name>/\`\n6. (Optional) For a custom domain, add a **CNAME** file and configure DNS.\n`;
      modal.classList.add('open');
      modal.setAttribute('aria-hidden','false');
      mdTitle.textContent = 'GitHub Pages â€“ Deployment Guide';
      mdStatus.textContent = '';
      mdContent.innerHTML = marked.parse(md);
    });

    // Initial render
    const initial = localStorage.getItem('lang') || 'en';
    if(initial==='zh'){ setActive(btnZh); renderLang('zh'); }
    else { setActive(btnEn); renderLang('en'); }
  </script>
</body>
</html>
